p8105\_hw3\_sg3891
================
Sandya Ganesh
2021-10-20

## Question 1

We will explore the instacart data set

#### Short Description of instacart data set, with size and structure of the data, describing some key variables, and giving illstrative examples of observations.

``` r
data("instacart")
```

The total number of observations in the instacart data set is 1384617
observations with 15 variables. Some key variables in this data set
include order\_id, user\_id, product\_name. There are 131209 unique
orders in this data set, with 131209 users placing these orders, which
means that each user has placed 1 instacart order in this dataset. These
orders include products such as Bulgarian Yogurt, Organic 4% Milk Fat
Whole Milk Cottage Cheese, Organic Celery Hearts. This dataset includes
orders for 39123 unique products.

There are 1384617 aisles, and the aisles that the most items are ordered
from are packaged vegetables fruits, fresh fruits, fresh vegetables.

Make a plot that shows the number of items ordered in each aisle,
limiting this to aisles with more than 10000 items ordered. Arrange
aisles sensibly, and organize your plot so others can read it.

``` r
aisle_df = 
  instacart %>% 
  count(aisle) %>% 
  filter(n > 10000)

ggplot(aisle_df, aes(x = reorder(aisle, -n), y = n)) + 
  geom_point() + 
  labs(
    title = "Instacart Popular Aisles ",
    x = "Aisle Names",
    y = "Number of items ordered",
    caption = "Data from the instacart dataset"
  ) +
  coord_flip()
```

![](p8105_hw3_sg3891_files/figure-gfm/q1_plot-1.png)<!-- -->

Below is a table showing the three most popular items in each of the
aisles “baking ingredients”, “dog food care”, and “packaged vegetables
fruits”, with the number of times each item is ordered.

``` r
instacart %>% 
  filter(aisle %in% c("baking ingredients", "dog food care", "packaged vegetables fruits")) %>%
  group_by(aisle) %>% 
  count(product_name) %>% 
  rename(item_count = n) %>% 
  mutate(order_count = min_rank(desc(item_count))) %>% 
  filter(order_count < 4) %>% 
  arrange(aisle, order_count) %>% 
  select(aisle, product_name, item_count) %>% 
  knitr::kable()
```

| aisle                      | product\_name                                 | item\_count |
|:---------------------------|:----------------------------------------------|------------:|
| baking ingredients         | Light Brown Sugar                             |         499 |
| baking ingredients         | Pure Baking Soda                              |         387 |
| baking ingredients         | Cane Sugar                                    |         336 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |          30 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |          28 |
| dog food care              | Small Dog Biscuits                            |          26 |
| packaged vegetables fruits | Organic Baby Spinach                          |        9784 |
| packaged vegetables fruits | Organic Raspberries                           |        5546 |
| packaged vegetables fruits | Organic Blueberries                           |        4966 |

Make a table showing the mean hour of the day at which Pink Lady Apples
and Coffee Ice Cream are ordered on each day of the week; format this
table for human readers (i.e. produce a 2 x 7 table).

``` r
instacart %>% 
  filter(product_name == "Pink Lady Apples" | product_name =="Coffee Ice Cream") %>%
  group_by(product_name, order_dow) %>%
  summarize(average = round(mean(order_hour_of_day), 2)) %>%
  pivot_wider(
    names_from = order_dow,
    values_from = average
  ) %>%
   rename( "Sunday" = "0","Monday" = "1", "Tuesday" = "2", "Wednesday" = "3", "Thursday" = "4", "Friday" = "5", "Saturday" = "6") %>% 
  knitr::kable()
```

    ## `summarise()` has grouped output by 'product_name'. You can override using the `.groups` argument.

| product\_name    | Sunday | Monday | Tuesday | Wednesday | Thursday | Friday | Saturday |
|:-----------------|-------:|-------:|--------:|----------:|---------:|-------:|---------:|
| Coffee Ice Cream |  13.77 |  14.32 |   15.38 |     15.32 |    15.22 |  12.26 |    13.83 |
| Pink Lady Apples |  13.44 |  11.36 |   11.70 |     14.25 |    11.55 |  12.78 |    11.94 |

## Question 2

The following question uses the BRFSS data.

The code chunk below cleans the data:

``` r
data("brfss_smart2010")

brfss_cleaned = brfss_smart2010 %>% 
  janitor::clean_names() %>%
  filter(topic %in% c("Overall Health")) %>%
  mutate(response = factor(response, levels = c("Poor", "Fair", "Good", "Very good", "Excellent"))) %>%
  arrange(response) %>%
  filter(response %in% c("Excellent", "Very good", "Good", "Fair", "Poor")) %>% 
  separate(locationdesc, into = c('state', 'location'), sep = ' - ')
```

In 2002, which states were observed at 7 or more locations?

``` r
brfss_cleaned %>% 
  filter(year == "2002") %>% 
  group_by(state) %>% 
  distinct(location) %>% 
  count(state) %>% 
  filter(n >= 7) %>% 
  select(state)
```

    ## # A tibble: 6 × 1
    ## # Groups:   state [6]
    ##   state
    ##   <chr>
    ## 1 CT   
    ## 2 FL   
    ## 3 MA   
    ## 4 NC   
    ## 5 NJ   
    ## 6 PA

As seen above, the states observed at 7 or more locations include
Connecticut, Florida, Massachusets, North Carolina, New Jersey, and
Pennsylvania.

In 2010, which states were observed at 7 or more locations?

``` r
br = brfss_cleaned %>% 
  filter(year == "2010") %>% 
  group_by(state) %>% 
  distinct(location) %>% 
  count(state) %>% 
  filter(n >= 7) %>% 
  select(state)
```

As seen above, the states observed at 7 or more locations include
California, Colorado, Florida, Massachusetts, Maryland, North Carolina,
Nebraska, New Jersey, New York, Ohio, Pennsylvania, South Carolina,
Texas, and Washington. These states were observed at 7 or more locations
in 2002: CA, CO, FL, MA, MD, NC, NE, NJ, NY, OH, PA, SC, TX, WA
